<!DOCTYPE html>
<html>
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width,initial-scale=1,user-scalable=no" name="viewport">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="format-detection" content="telephone=no,address=no">
  <meta name="apple-mobile-web-app-status-bar-style" content="white">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" >
  <title>hash demo</title>
</head>
<body>
  <p>hash test</p>
  <button id="btn1">修改 hash</button>
  <script>
    //   hash 变化，包括
    // a. JS 修改 url
    // b. 手动修改 url 的 hash
    // c. 浏览器前进、后退
    window.onhashchange = (event) => {
        console.log('old url',event.oldURL)
        console.log('new url',event.newURL)

        console.log('hash:',location.hash)
    }

    // 页面初次加载，获取 hash
    document.addEventListener('DOMContentLoaded',()=>{
        console.log('hash:',location.hash)
    })

    // JS 修改 url
    document.getElementById('btn1').addEventListener('click',()=>{
        location.href = '#/user'
    })
  </script>
</body>
</html>
